<img width="501" height="45" alt="image" src="https://github.com/user-attachments/assets/1c49f326-02f8-48e3-990d-782f01259727" />

우선적으로 S3상에서 민감단어파일, 기업정보벡터파일을 로드한다. 

## 민감 단어 식별
- 사용자가 챗봇에게 질문한 내용 중 민감단어리스트에 해당하는 단어가 포함되면 **위협**이라고 탐지하고 답변 생성을 멈춘다.
  
<img width="256" height="134" alt="image" src="https://github.com/user-attachments/assets/c4246ae2-b587-42be-b3dd-d3657c40d920" />






## 기업 정보 벡터에서 질문에 대한 내용 찾아 답변 생성
<img width="402" height="97" alt="image" src="https://github.com/user-attachments/assets/295b4775-d8a4-40d7-9e94-4074363501a5" />

> **사용자의 질문 텍스트를 벡터로 변환한다.** 
>
> 변환할 문장을 text로 받고, 이를 임베딩
> 변환 결과 벡터 변환 (AI가 비교가능하도록)

<img width="463" height="265" alt="image" src="https://github.com/user-attachments/assets/a14b1934-9664-4d46-a77c-dbe27a2542b0" />

```

[
  {
    "id": 0,
    "text": "DO THE RIGHT THING 신한금융그룹 2023 ESG 보고서...",
    "embedding": [-0.17847, -0.05301, ...]
  },
  {
    "id": 10,
    "text": "있는 요소 3가지를 선정하여...",
    "embedding": [-0.00289, 0.12841, ...]
  }
]

```
> 기업 정보 데이터는 다음과 같이 되어있음.
> 
> 이 데이터에서 "embedding"부분만 추출하여
> 
> 매개변수로 받은 user_message_vector과 비교하여 유사도를 계산해
>
> (인덱스, 유사도) 튜플로 묶어 유사도 높은 순으로 정렬
>
> 상위 k개를 찾아 합쳐 GPT에게 전달 시 더 정확해짐
>
> Threshold 적용하면 ***유사도가 너무 적으면*** 배제 -> GPT가 잘못된 자료 참고하지 않게 할 수 있음 
